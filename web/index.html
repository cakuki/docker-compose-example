<html>
<head>
    <title>Basic Docker Compose Project</title>
</head>
<body>
<h1>Hello world!</h1>
<h2>New Post</h2>
<label for="title">Title:</label>
<input type="text" name="title" id="title">
<button id="button-save">Save</button>
<hr/>
<ul></ul>
<script>
const api = 'http://localhost:3000';

document.querySelector('#button-save').addEventListener('click', () => {
    let $title = document.querySelector('#title');

    if (!$title.value) return;

    fetch(`${api}/posts`, {
        method: 'POST',
        headers: {
            'Accept': 'application/json, text/plain, */*',
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ title: $title.value })
    })
    .then(() => {
        document.querySelector('ul').innerHTML += `<li>${$title.value}</li>`
        $title.value = '';
    });
}, false);

fetch(`${api}/posts`).then(response => response.json()).then(posts => {
    document.querySelector('ul').innerHTML = posts.map(post => `<li>${post.title}</li>`).join('');
})
</script>
</body>
</html>
